{# @var craft \craft\web\twig\variables\CraftVariable #}
{% extends "_layouts/_layout.twig" %}

{% block _inline_css %}
    <style>
        {{source ("index_critical.min.css", ignore_missing = true)}}
    </style>
{% endblock %}

{% block content %}

{% include("_partials/_hero_offset_image.twig") %}

{% paginate craft.entries().section('projects').with([['heroFeaturedImage', {}]]).limit(6) as pageInfo, projects %}

<section class="section is-medium case-list">
    <div class="container">
        {% for batchedProjects in projects | batch(2) %}
            <div class="tile is-ancestor is-block-tablet is-flex-widescreen">
                {% for project in batchedProjects %}
                    <div class="tile is-parent">
                        <a class="tile-link-wrapper" href="{{ project.uri }}">
                            <article class="tile is-child is-dark is-background-container has-background animatable">
                                <div class="background-image-container">
                                    <img class="image js-mouse-tilt-hover" src="{{ project.heroFeaturedImage[0].getUrl() }}">
                                </div>
                                <header>
                                    <p class="is-subheading">
                                        {% for tag in project.serviceTags.all %}
                                            {{ tag|upper }}
                                            {% if not loop.last %} + {% endif %}
                                        {% endfor %}
                                    </p>
                                    <h1>{{ project.heroSubheading }}</h1>
                                </header>
                                <div class="description">
                                    <p>
                                        {{ project.shortDescription }}
                                    </p>
                                    <a class="is-button is-text" href="{{ project.uri }}">See Project</a>
                                </div>
                            </article>
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
        {% if pageInfo.totalPages and pageInfo.totalPages > 1 %}
        <div class="pagination animatable">
            <div class="columns">
                <div class="column">
                    {% if pageInfo.prevUrl %}
                        <a href="{{ pageInfo.prevUrl }}">Previous Page</a>
                    {% endif %}
                </div>
                <div class="column has-text-right">
                    {% if pageInfo.nextUrl %}
                        <a href="{{ pageInfo.nextUrl }}">Next Page</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>

{% endblock %}

{% block _inline_js %}{% endblock %}